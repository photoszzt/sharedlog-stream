syntax = "proto3";

option go_package = "sharedlog-stream/pkg/transaction/remote_txn_rpc";

package remote_txn_rpc;

import "pkg/commtypes/producer_state.proto";

service RemoteTxnMngr {
  rpc Init(InitArg) returns (producer_state.ProdId) {}
}

message InputTopicInfo {
  string topicName = 1;
  uint32 numPartition = 2;
  uint32 bufMaxSize = 3;
}

message InitArg {
  string TransactionalId = 1;
  uint32 SubstreamNum = 2; // which substream this task processes
  repeated InputTopicInfo InputTopicInfos = 3;
}

message InitReply {
  producer_state.ProdId prodId = 1;
  repeated OffsetPair offsetPairs = 2;
}

message OffsetPair {
  string topicName = 1;
  uint64 offset = 2;
}
